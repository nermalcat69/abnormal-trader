import{a as T,m as Y,r as j,e as V,o as n,h as r,i as f,u as s,f as e,l as B,F as N,p as O,c as $,w as z,q as S,s as X,t as ee,v as te,x as G,y as q,k as Z,z as y,A as ne,B as se,C as oe,D as w,E as K,G as ae,H as ie,I as le,J as re,K as ce}from"./entry.2a062301.js";import{_ as ue}from"./Navbar.vue.e1117ac7.js";import{_ as H}from"./NIconButton.vue.61149d03.js";import{_ as de}from"./NTextInput.vue.f5b2276f.js";import{_ as pe}from"./NSectionBlock.77e830ae.js";import{_ as me}from"./FilepathItem.vue.1374ae6e.js";import{_ as fe}from"./CodeSnippets.vue.cf956c68.js";import{u as he,a as _e}from"./editor.4c6382c7.js";import{_ as ve}from"./DrawerRight.vue.7d712780.js";import{D as ge}from"./constants.d7bcda3c.js";import{F as xe}from"./fuse.esm.88e2763d.js";import"./NIconTitle.vue.636dd062.js";import"./NCodeBlock.vue.8fd682f9.js";import"./client.44af506c.js";const be={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},we={for:"drop-zone-input","text-3xl":""},ye={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},$e=e("div",{px6:"",py6:""},[e("h1",{"text-2xl":""}," Upload "),e("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1),ke={grid:"~ cols-minmax-8rem","overflow-auto":"",p6:""},Ce={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Fe=["src"],Pe={flex:"~ gap1","items-center":""},Ae={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},De=T({__name:"DropZone",props:{folder:{type:String,required:!0}},emits:["uploaded"],setup(o,{emit:t}){const m=o,c=Y(),g=j(!1),C=j(),u=j([]),F=["image","video"];function L(a){C.value=a.target,g.value=!0}function E(a){a.target===C.value&&(g.value=!1)}function M(a){a.preventDefault()}function x(a){a.preventDefault(),h(a.dataTransfer.files)}function h(a){const _=Array.from(a||[]);if(_.length){const l=[],v=u.value.map(d=>d.name);for(const d of _)if(v.includes(d.name)){let b=1;const[P,R]=d.name.split(".");for(;v.includes(`${P} (${b}).${R}`);)b++;const U=`${P}-${b}.${R}`,W=new Blob([d],{type:d.type}),Q=new File([W],U,{lastModified:Date.now()});l.push(Q),v.push(U)}else d.type===""?c("Folders are not supported yet","carbon:face-dissatisfied"):F.some(b=>d.type.includes(b))?l.push(d):c(`"${d.type}" file type is not allowed`,"carbon:face-dizzy");u.value=[...u.value,...l]}}async function i(){if(ee.value||te.value)return;const a=[];for(const _ of u.value){const l=new FileReader;l.readAsDataURL(_);const d=(await new Promise(b=>{l.onload=()=>b(l.result)})).split(";base64,").pop();a.push({name:_.name,data:d})}await G.writeStaticAssets([...a],m.folder).then(()=>{t("uploaded"),I(),c("Files uploaded successfully!","carbon:face-cool")}).catch(_=>{console.error(_),I(),c("Upload failed!","carbon:face-dizzy")}),g.value=!1}function p(a){u.value?.splice(a,1)}function A(a){return URL.createObjectURL(a)}function k(a,_){const[l,v]=a.name.split("."),d=_.replace(/\.\w+$/,""),b=`${d}.${v}`;return d.length===0?(alert("File name must be at least 1 characters long"),l):(Object.defineProperty(a,"name",{value:b,writable:!1}),u.value.splice(u.value.indexOf(a),1,a),a)}function D(){u.value=[]}function I(){g.value=!1,D()}return V("dragenter",L),V("dragleave",E),V("dragover",M),V("drop",x),(a,_)=>{const l=H,v=q,d=de,b=Z;return n(),r("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:X(s(g)?"opacity-100 visible":"opacity-0 invisible")},[f(l,{icon:"carbon-close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",onClick:I}),s(u)?.length?(n(),r("div",ye,[$e,e("div",ke,[(n(!0),r(N,null,O(s(u),(P,R)=>(n(),r("div",{key:P.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[e("div",Ce,[e("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:A(P)},null,8,Fe)]),e("div",Pe,[f(d,{n:"xs","flex-auto":"","model-value":P.name,"onUpdate:modelValue":U=>k(P,U.target.value)},null,8,["model-value","onUpdate:modelValue"]),f(l,{icon:"carbon-delete","flex-none":"",title:"Remove file",onClick:U=>p(R)},null,8,["onClick"])])]))),128))]),e("div",Ae,[s(u).length?(n(),$(b,{key:0,n:"red",onClick:D},{default:z(()=>[f(v,{icon:"carbon-clean"}),B(" Clear ")]),_:1})):S("",!0),f(b,{disabled:!s(u).length,n:"primary solid",onClick:i},{default:z(()=>[f(v,{icon:"carbon-cloud-upload"}),B(" Upload ")]),_:1},8,["disabled"])])])):(n(),r("div",be,[e("label",we,[f(v,{icon:"carbon-cloud-upload","mr-2":""}),B(" Drop files here or click to select ")]),e("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:_[0]||(_[0]=P=>h(P.target.files))},null,32)]))],2)}}}),Ie=T({__name:"AssetFontPreview",props:{asset:null},setup(o){const t=o,m=y(()=>`devtools-assets-${ne(t.asset)}`);return se(y(()=>`
  @font-face {
    font-family: '${m.value}';
    src: url('${t.asset.publicPath}');
  }
`)),(c,g)=>(n(),r("div",{"of-hidden":"",style:oe({fontFamily:`'${s(m)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),Ne={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},Se=["src"],ze={key:2,"i-carbon-document":"","text-3xl":"",op20:""},je={key:3,"w-full":"","self-start":"",p4:""},Te=["textContent"],Ee={key:4,"i-carbon-help":"","text-3xl":"",op20:""},J=T({__name:"AssetPreview",props:{asset:null,textContent:null},setup(o){return(t,m)=>{const c=Ie;return n(),r("div",Ne,[o.asset.type==="image"?(n(),r("img",{key:0,src:o.asset.publicPath},null,8,Se)):o.asset.type==="font"?(n(),$(c,{key:o.asset.publicPath,asset:o.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):o.asset.type==="text"&&!o.textContent?(n(),r("div",ze)):o.asset.type==="text"&&o.textContent?(n(),r("div",je,[e("pre",{"max-h-10rem":"","of-hidden":"","font-mono":"","text-xs":"",textContent:w(o.textContent)},null,8,Te)])):(n(),r("div",Ee))])}}}),Be={flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},Le={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},Me=T({__name:"AssetGridItem",props:{asset:null,folder:null},setup(o){const t=o,m=y(()=>t.folder&&t.asset.path.startsWith(t.folder)?t.asset.path.slice(t.folder.length):t.asset.path);return(c,g)=>{const C=J;return n(),r("button",Be,[f(C,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:o.asset},null,8,["asset"]),e("div",Le,w(s(m)),1)])}}}),Ue={flex:"~ gap-1","w-full":"","items-center":"",hover:"bg-active",rounded:"",px4:"",py2:""},Oe={"of-hidden":"",truncate:"","ws-nowrap":"","text-center":""},Re=T({__name:"AssetListItem",props:{asset:null},setup(o){const t=o,m=y(()=>t.asset.type==="image"?"i-carbon-image":t.asset.type==="video"?"i-carbon-video":t.asset.type==="audio"?"i-carbon-volume-up":t.asset.type==="font"?"i-carbon-text-small-caps":t.asset.type==="text"?"i-carbon-document":t.asset.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(c,g)=>(n(),r("button",Ue,[e("div",{class:X(s(m))},null,2),e("div",Oe,w(o.asset.path),1)]))}}),Ve={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},Ge=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Preview "),e("div",{"x-divider":""})],-1),Ke={flex:"~","items-center":"","justify-center":""},Xe=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Details "),e("div",{"x-divider":""})],-1),qe={"max-w-full":"","w-full":"","table-fixed":""},Ze=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1),He={flex:"~ gap-1","w-full":"","items-center":""},Je=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1),We={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},Qe={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},Ye=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1),et={capitalize:""},tt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1),nt={key:0},st=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1),ot=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1),at=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1),it={op70:""},lt=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Actions "),e("div",{"x-divider":""})],-1),rt={flex:"~ gap2 wrap"},ct=e("div",{"flex-auto":""},null,-1),ut=T({__name:"AssetDetails",props:{asset:null},setup(o){const t=o,m=he(),c=K(()=>{if(t.asset.type==="image")return G.getImageMeta(t.asset.filePath)}),g=K(()=>{if(t.asset.type==="text")return G.getTextAssetContent(t.asset.filePath)}),C=ae(),u=y(()=>(C.value?._installedModules||[]).some(p=>p.meta?.name==="@nuxt/image"||p.meta?.name==="@nuxt/image-edge")),F=y(()=>{const i=[];if(t.asset.type==="image"){const p=c.value?.width?`
  width="${c.value.width}"
  height="${c.value.height}" `:" ";return i.push({lang:"vue-html",code:`<img${p}
  src="${t.asset.publicPath}"
/>`,name:"Plain Image"}),u.value&&i.push({lang:"vue-html",code:`<NuxtImage${p}
  src="${t.asset.publicPath}"
/>`,name:"Nuxt Image",docs:"https://image.nuxtjs.org/components/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${p}
  src="${t.asset.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxtjs.org/components/nuxt-picture"}),i}return i.push({lang:"html",code:`<a download href="${t.asset.publicPath}">
  Download ${t.asset.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),i}),L=_e(),E=ie(()=>t.asset.mtime),M=y(()=>{const i=t.asset.size;return i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(2)} KB`:`${(i/1024/1024).toFixed(2)} MB`}),x=y(()=>{if(!c.value?.width||!c.value?.height)return"";const i=(A,k)=>k?i(k,A%k):A,p=i(c.value.width,c.value.height);return p>3?`${c.value.width/p}:${c.value.height/p}`:""}),h=y(()=>["image","text","video","font"].includes(t.asset.type));return(i,p)=>{const A=J,k=me,D=H,I=Z,a=fe;return n(),r("div",Ve,[s(h)?(n(),r(N,{key:0},[Ge,e("div",Ke,[f(A,{"max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:o.asset,"text-content":s(g)},null,8,["asset","text-content"])])],64)):S("",!0),Xe,e("table",qe,[e("tbody",null,[e("tr",null,[Ze,e("td",null,[e("div",He,[f(k,{filepath:o.asset.filePath,"text-left":""},null,8,["filepath"]),f(D,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",onClick:p[0]||(p[0]=_=>s(m)(o.asset.filePath))})])])]),e("tr",null,[Je,e("td",null,[e("div",We,[e("div",Qe,w(o.asset.publicPath),1),f(D,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",onClick:p[1]||(p[1]=_=>s(L)(o.asset.publicPath))}),f(D,{"flex-none":"",to:o.asset.publicPath,icon:"carbon-launch",target:"_blank",title:"Open in browser"},null,8,["to"])])])]),e("tr",null,[Ye,e("td",et,w(o.asset.type),1)]),s(c)?.width?(n(),r(N,{key:0},[e("tr",null,[tt,e("td",null,w(s(c).width)+" x "+w(s(c).height),1)]),s(x)?(n(),r("tr",nt,[st,e("td",null,w(s(x)),1)])):S("",!0)],64)):S("",!0),e("tr",null,[ot,e("td",null,w(s(M)),1)]),e("tr",null,[at,e("td",null,[B(w(new Date(o.asset.mtime).toLocaleString())+" ",1),e("span",it,"("+w(s(E))+")",1)])])])]),lt,e("div",rt,[f(I,{to:o.asset.publicPath,download:"",target:"_blank",icon:"carbon-download"},{default:z(()=>[B(" Download ")]),_:1},8,["to"]),o.asset.type==="image"?(n(),$(I,{key:0,disabled:"",icon:"carbon-image-service"},{default:z(()=>[B(" Optimize image (Coming soon) ")]),_:1})):S("",!0)]),ct,s(F).length?(n(),$(a,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":s(F)},null,8,["code-snippets"])):S("",!0)])}}}),dt={"h-full":"","of-auto":""},pt={"flex-none":"",flex:"~ gap4"},mt={op50:""},ft={key:0},ht={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},_t={key:1,p2:"",grid:"~ cols-minmax-8rem"},vt={key:1},St=T({__name:"assets",setup(o){const t=le(),m=j(""),c=y(()=>new xe(t.value||[],{keys:["path"]})),g=y(()=>m.value?c.value.search(m.value).map(h=>h.item):t.value||[]),C=y(()=>{const x={};for(const h of g.value){const i=`${h.path.split("/").slice(0,-1).join("/")}/`;x[i]||(x[i]=[]),x[i].push(h)}return Object.entries(x).sort(([h],[i])=>h.localeCompare(i))}),u=j(),F=j("grid");function L(){F.value=F.value==="list"?"grid":"list"}re("Escape",()=>{u.value=void 0});const E=j();function M(){}return(x,h)=>{const i=q,p=ue,A=De,k=Me,D=pe,I=Re,a=ut,_=ve;return n(),r("div",dt,[f(p,{ref_key:"navbar",ref:E,search:s(m),"onUpdate:search":h[0]||(h[0]=l=>ce(m)?m.value=l:null),pb2:""},{actions:z(()=>[e("div",pt,[e("button",{title:"Toggle view",onClick:L},[s(F)==="grid"?(n(),$(i,{key:0,icon:"i-carbon-list"})):(n(),$(i,{key:1,icon:"i-carbon-grid"}))])])]),default:z(()=>[e("div",mt,[s(m)?(n(),r("span",ft,w(s(g).length)+" matched Â· ",1)):S("",!0),e("span",null,w(s(t)?.length)+" assets in total",1)])]),_:1},8,["search"]),f(A,{folder:"/",onUploaded:M}),s(F)==="grid"?(n(),r(N,{key:0},[s(C).length>1?(n(!0),r(N,{key:0},O(s(C),([l,v])=>(n(),$(D,{key:l,text:l,description:`${v.length} items`,open:v.length<=("DETAILS_MAX_ITEMS"in x?x.DETAILS_MAX_ITEMS:s(ge)),padding:!1},{default:z(()=>[e("div",ht,[(n(!0),r(N,null,O(v,d=>(n(),$(k,{key:d.path,asset:d,folder:l,onClick:b=>u.value=d},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(n(),r("div",_t,[(n(!0),r(N,null,O(s(g),l=>(n(),$(k,{key:l.path,asset:l,onClick:v=>u.value=l},null,8,["asset","onClick"]))),128))]))],64)):(n(),r("div",vt,[(n(!0),r(N,null,O(s(g),l=>(n(),$(I,{key:l.path,asset:l,onClick:v=>u.value=l},null,8,["asset","onClick"]))),128))])),f(_,{"model-value":!!s(u),"auto-close":"","w-120":"",navbar:s(E),onClose:h[1]||(h[1]=l=>u.value=void 0)},{default:z(()=>[s(u)?(n(),$(a,{key:0,asset:s(u)},null,8,["asset"])):S("",!0)]),_:1},8,["model-value","navbar"])])}}});export{St as default};
