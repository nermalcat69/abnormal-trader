import{_ as ie}from"./Navbar.vue.e1117ac7.js";import{_ as Y}from"./Badge.21478015.js";import{a as Z,G as ce,a3 as de,z as p,r as k,o as a,h as m,f as i,c as x,w as l,l as h,D as y,u as e,s as b,aK as G,F as j,p as A,K as ee,i as s,q as $,k as pe,y as me,aL as fe,a9 as _e,aM as ve,aN as he,ai as ye,ab as ge}from"./entry.2a062301.js";import{_ as xe}from"./NSelect.vue.90e01b18.js";import{_ as be}from"./NTextInput.vue.f5b2276f.js";import{_ as Ce}from"./CodeSnippets.vue.cf956c68.js";import{_ as te}from"./NPanelGrids.c52bd29c.js";import{_ as ke}from"./NCodeBlock.vue.8fd682f9.js";import{u as $e}from"./editor.4c6382c7.js";import{C as X}from"./constants.d7bcda3c.js";import{_ as Re}from"./PanelLeftRight.vue.8adf1a04.js";import{F as Te}from"./fuse.esm.88e2763d.js";import"./client.44af506c.js";const qe={"h-full":"","w-full":"",flex:"~ col"},je={flex:"~ col gap-2","flex-none":"",p4:"","navbar-glass":""},Se={flex:"~ gap2"},Ve={flex:"~ gap2","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},we=i("div",{"flex-auto":""},null,-1),Ne={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Ue={"text-right":"","font-mono":""},Ee={key:1,relative:""},Pe={key:2,px4:"",py2:"",flex:"~ col gap-2",border:"b base"},Be={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},Le=i("div",null,"Response",-1),Me={key:1,"text-xs":"",op50:""},Oe=i("div",{"flex-auto":""},null,-1),De=i("div",{op50:""}," Request finished in ",-1),Fe=Z({__name:"ServerRouteDetails",props:{route:{type:Object,required:!0}},setup(P){const B=P,R=ce(),u=de({contentType:"text/plain",data:"",statusCode:200,error:void 0}),T=p(()=>u.contentType.includes("application/json")?"json":u.contentType.includes("text/html")?"html":u.contentType.includes("text/css")?"css":u.contentType.includes("text/javascript")?"javascript":u.contentType.includes("text/xml")||u.contentType.includes("application/xml")?"xml":"text"),q=p(()=>T.value==="json"?JSON.stringify(u.data,null,2):u.data),w=k(0),C=k(!1),N=k(!1),W=$e(),L=p(()=>B.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),S=p(()=>L.value?.filter(o=>o.startsWith(":")||o.startsWith("**:"))||[]),g=k(B.route.method||"GET"),U=k({}),E=k([{key:"",value:""}]),V=k([{key:"",value:""}]),f=k([{key:"Content-Type",value:"application/json"}]),K=p(()=>V.value.filter(({key:o})=>o).length),z=p(()=>f.value.filter(({key:o})=>o).length),H=p(()=>{const o={};for(let t=0;t<E.value.length;t++){const{key:n,value:c}=E.value[t];o[n]=c}return Object.keys(o)[0]?o:null}),oe=p(()=>{let o=R.value?.devServer.url||"http://localhost";o.charAt(o.length-1)==="/"&&(o=o.slice(0,-1));const t=R.value?.devServer.port||3e3;return o.includes(`:${t}`)?o:`${o}:${t}`}),M=p(()=>{let o=new URLSearchParams(Object.fromEntries(V.value.filter(({key:c})=>c).map(({key:c,value:_})=>[c,_]))).toString();o&&(o=`?${o}`);const t=(L.value?.map(c=>(c.startsWith(":")||c.startsWith("**:"))&&U.value[c]||c).join("")||"")+o;let n=R.value?.app.baseURL||"";return(n==="./"||n===".")&&(n=""),n.endsWith("/")&&(n=n.slice(0,-1)),n+t}),ne=p(()=>oe.value+M.value);async function J(){N.value=!0,C.value=!0,Object.assign(u,{lang:"text",contentType:"",data:"",content:"",error:void 0});const o=Date.now();try{u.data=await $fetch(ne.value,{method:g.value.toUpperCase(),headers:Object.fromEntries(f.value.filter(({key:t,value:n})=>t&&n).map(({key:t,value:n})=>[t,n])),query:Object.fromEntries(V.value.filter(({key:t,value:n})=>t&&n).map(({key:t,value:n})=>[t,n])),body:H.value,onResponse({response:t}){u.contentType=(t.headers.get("content-type")||"").toString().toLowerCase().trim(),u.statusCode=t.status},onResponseError(t){u.error=t.response._data,u.data=t.response._data}})}catch{}C.value=!1,w.value=Date.now()-o}const Q=p(()=>{const o=[],t=[],n=f.value.filter(({key:_,value:v})=>_&&v&&!(_==="Content-Type"&&v==="application/json")).map(({key:_,value:v})=>`  '${_}': '${v}'`).join(`,
`);g.value.toUpperCase()!=="GET"&&t.push(`method: '${g.value.toUpperCase()}'`),n&&t.push(`headers: {
${n}
}`),H.value&&t.push(`body: ${JSON.stringify(H.value,null,2)}`);const c=t.length?`, {
${t.join(`,
`).split(`
`).map(_=>`  ${_}`).join(`
`)}
}`:"";return o.push({name:"useFetch",lang:"javascript",docs:X.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${M.value}'${c})`}),o.push({name:"$fetch",lang:"javascript",docs:X.nuxt.$fetch,code:`await $fetch('${M.value}'${c})`}),o}),d=k(S.value.length?"params":"query"),O=p(()=>{if(d.value==="query")return V.value;if(d.value==="body")return E.value;if(d.value==="headers")return f.value}),se=["GET","POST","PUT","PATCH","DELETE","HEAD"];return(o,t)=>{const n=pe,c=xe,_=be,v=me,ae=Ce,re=te,le=fe,I=Y,ue=ke;return a(),m("div",qe,[i("div",je,[i("div",Se,[P.route.method?(a(),x(n,{key:0,class:b(("getRequestMethodClass"in o?o.getRequestMethodClass:e(G))(e(g))),"pointer-events-none":"",tabindex:"-1"},{default:l(()=>[h(y(e(g).toUpperCase()),1)]),_:1},8,["class"])):(a(),x(c,{key:1,modelValue:e(g),"onUpdate:modelValue":t[0]||(t[0]=r=>ee(g)?g.value=r:null),class:b(("getRequestMethodClass"in o?o.getRequestMethodClass:e(G))(e(g)))},{default:l(()=>[(a(),m(j,null,A(se,r=>i("option",{key:r,class:b(("getRequestMethodClass"in o?o.getRequestMethodClass:e(G))(r))},y(r.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),s(_,{"model-value":e(M),disabled:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"primary xs"},null,8,["model-value"]),s(n,{n:"primary solid",onClick:J},{default:l(()=>[s(v,{icon:"carbon:send"})]),_:1})])]),i("div",Ve,[e(S).length?(a(),x(n,{key:0,class:b(e(d)==="params"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[1]||(t[1]=r=>d.value="params")},{default:l(()=>[s(v,{icon:"i-carbon-text-selection"}),h(" Params ("+y(e(S).length)+") ",1)]),_:1},8,["class"])):$("",!0),s(n,{class:b(e(d)==="query"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[2]||(t[2]=r=>d.value="query")},{default:l(()=>[s(v,{icon:"i-carbon-help"}),h(" Query "+y(e(K)?`(${e(K)})`:""),1)]),_:1},8,["class"]),e(g)!=="GET"?(a(),x(n,{key:1,class:b(e(d)==="body"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[3]||(t[3]=r=>d.value="body")},{default:l(()=>[s(v,{icon:"i-carbon-document"}),h(" Body ")]),_:1},8,["class"])):$("",!0),s(n,{class:b(e(d)==="headers"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[4]||(t[4]=r=>d.value="headers")},{default:l(()=>[s(v,{icon:"i-carbon-html-reference"}),h(" Headers "+y(e(z)?`(${e(z)})`:""),1)]),_:1},8,["class"]),s(n,{class:b(e(d)==="snippet"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[5]||(t[5]=r=>d.value="snippet")},{default:l(()=>[s(v,{icon:"carbon:code"}),h(" Snippets ")]),_:1},8,["class"]),we,s(n,{icon:"carbon-launch",onClick:t[6]||(t[6]=r=>e(W)(P.route.filepath))},{default:l(()=>[h(" Open in Editor ")]),_:1})]),e(d)==="params"?(a(),m("div",Ne,[(a(!0),m(j,null,A(e(S),r=>(a(),m(j,{key:r},[i("div",Ue,y(r),1),s(_,{modelValue:e(U)[r],"onUpdate:modelValue":D=>e(U)[r]=D,placeholder:r,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):$("",!0),e(d)==="snippet"?(a(),m("div",Ee,[e(Q).length?(a(),x(ae,{key:0,border:"b base","code-snippets":e(Q)},null,8,["code-snippets"])):$("",!0)])):e(O)?(a(),m("div",Pe,[(a(!0),m(j,null,A(e(O),(r,D)=>(a(),m("div",{key:D,flex:"~ gap-2","justify-around":""},[s(_,{modelValue:r.key,"onUpdate:modelValue":F=>r.key=F,placeholder:"Key","flex-1":"","font-mono":"",n:"sm"},null,8,["modelValue","onUpdate:modelValue"]),s(_,{modelValue:r.value,"onUpdate:modelValue":F=>r.value=F,placeholder:"Value","flex-1":"","font-mono":"",n:"sm"},null,8,["modelValue","onUpdate:modelValue"]),s(n,{n:"red",onClick:F=>e(O).splice(D,1)},{default:l(()=>[s(v,{icon:"carbon:delete"})]),_:2},1032,["onClick"])]))),128)),i("div",null,[s(n,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:t[7]||(t[7]=r=>e(O).push({key:"",value:""}))},{default:l(()=>[h(" Add ")]),_:1})])])):$("",!0),e(N)?e(C)?(a(),x(le,{key:4,"z-10":"","flex-auto":"","backdrop-blur":""},{default:l(()=>[h(" Fetching... ")]),_:1})):(a(),m(j,{key:5},[i("div",Be,[Le,e(u).error?(a(),x(I,{key:0,"bg-red-400:10":"","text-red-400":""},{default:l(()=>[h(" Error ")]),_:1})):$("",!0),s(I,{class:b({"bg-orange-400:10 text-orange-400":e(u).error,"bg-green-400:10 text-green-400":!e(u).error})},{default:l(()=>[h(y(e(u).statusCode),1)]),_:1},8,["class"]),e(u).contentType?(a(),m("code",Me,y(e(u).contentType),1)):$("",!0),Oe,De,s(I,{"bg-green-400:10":"","text-green-400":""},{default:l(()=>[h(y(e(w))+" ms ",1)]),_:1})]),s(ue,{"flex-auto":"","overflow-auto":"","py-2":"",code:e(q),lang:e(T)},null,8,["code","lang"])],64)):(a(),x(re,{key:3},{default:l(()=>[s(n,{n:"primary",onClick:J},{default:l(()=>[s(v,{icon:"carbon:send"}),h(" Send request ")]),_:1})]),_:1}))])}}}),Ge={flex:"~ gap1","text-sm":"",op50:""},Ae={key:0},We={"w-12":"","flex-none":"","text-right":""},He={"font-mono":"","text-sm":""},Ie=i("div",{"x-divider":""},null,-1),Ke=i("span",{op75:""},"Select a route to start",-1),lt=Z({__name:"server-routes",setup(P){const B=_e(),R=ve(),u=p(()=>new Te(R.value||[],{keys:["method","route"],shouldSort:!0})),T=p(()=>R.value?.find(C=>C.path===B.query?.path)),q=k(""),w=p(()=>R.value?q.value?u.value.search(q.value).map(C=>C.item):R.value:[]);return(C,N)=>{const W=ie,L=Y,S=ye,g=Fe,U=ge,E=te,V=Re;return a(),x(V,null,{left:l(()=>[s(W,{search:e(q),"onUpdate:search":N[0]||(N[0]=f=>ee(q)?q.value=f:null),pb2:""},{default:l(()=>[i("div",Ge,[e(q)?(a(),m("span",Ae,y(e(w).length)+" matched Â· ",1)):$("",!0),i("span",null,y(e(R)?.length)+" routes in total",1)])]),_:1},8,["search"]),(a(!0),m(j,null,A(e(w),f=>(a(),m(j,{key:f.id},[s(S,{flex:"~ gap-2","items-center":"","hover-bg-active":"",px2:"",py1:"",class:b([{"bg-active":e(T)?.path===f.path}]),to:{query:{path:f.path}}},{default:l(()=>[i("div",We,[s(L,{class:b(("getRequestMethodClass"in C?C.getRequestMethodClass:e(G))(f.method||"*")),title:"updates available",textContent:y((f.method||"*").toUpperCase())},null,8,["class","textContent"])]),i("span",He,y(f.route),1)]),_:2},1032,["class","to"]),Ie],64))),128))]),right:l(()=>[(a(),x(he,{max:10},[e(T)?(a(),x(g,{key:e(T).path,route:e(T)},null,8,["route"])):$("",!0)],1024)),e(T)?$("",!0):(a(),x(E,{key:0},{default:l(()=>[s(U,{px6:"",py2:""},{default:l(()=>[Ke]),_:1})]),_:1}))]),_:1})}}});export{lt as default};
